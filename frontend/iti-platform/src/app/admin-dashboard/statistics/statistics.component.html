<h3 class="mat-h3" style="color: #2c3e50; font-weight: 600; margin-bottom: 20px;"> Dashboard Overview</h3>

<div class="row g-4">
  <div class="col-md-6">
    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>User Statistics</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <canvas #usersChart style="max-height: 300px;"></canvas>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="col-md-6">
    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Activity Overview</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <canvas #postsChart style="max-height: 300px;"></canvas>
      </mat-card-content>
    </mat-card>
  </div>
</div>

<div class="row mt-4">
  <div class="col-md-6">
    <mat-card>
      <mat-card-header>
        <mat-card-title> Open Tickets Percentage</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-progress-bar mode="determinate" [value]="openTicketsPercentage" color="warn"></mat-progress-bar>
        <p class="mt-2" style="font-weight: 500; color: #555;">{{ openTicketsPercentage }}%</p>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="col-md-6">
    <mat-card>
      <mat-card-header>
        <mat-card-title> Comments per Posts</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-progress-bar mode="determinate" [value]="commentsPerPostsPercentage" color="primary"></mat-progress-bar>
        <p class="mt-2" style="font-weight: 500; color: #555;">{{ commentsPerPostsPercentage }}%</p>
      </mat-card-content>
    </mat-card>
  </div>
</div>

<div class="row mt-4">
  <div class="col-12">
    <mat-card>
      <mat-card-header>
        <mat-card-title> Latest Registered Users</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="row g-3">
          <div class="col-md-4" *ngFor="let user of stats.latest_users">
            <div class="data-card">
              <div class="icon-wrapper">
                <span class="material-icons">person</span>
              </div>
              <div class="data-content">
                <h6>ID: {{ user.id }}</h6>
                <p><strong>{{ user.name }}</strong></p>
                <p>{{ user.email }}</p>
                <p class="date">Joined: {{ user.created_at | date:'mediumDate' }} {{ user.created_at | date:'shortTime' }}</p>
              </div>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>

<div class="row mt-4">
  <div class="col-12">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Latest Forum Posts</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="row g-3">
          <div class="col-md-4" *ngFor="let post of stats.latest_posts">
            <div class="data-card">
              <div class="icon-wrapper">
                <span class="material-icons">article</span>
              </div>
              <div class="data-content">
                <h6>ID: {{ post.id }}</h6>
                <p><strong>{{ post.title }}</strong></p>
                <p class="date">Posted: {{ post.created_at | date:'mediumDate' }} {{ post.created_at | date:'shortTime' }}</p>
              </div>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>

<div class="row mt-4">
  <div class="col-12">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Latest Support Tickets</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="row g-3">
          <div class="col-md-4" *ngFor="let ticket of stats.latest_tickets">
            <div class="data-card">
              <div class="icon-wrapper">
                <span class="material-icons">support</span>
              </div>
              <div class="data-content">
                <h6>ID: {{ ticket.id }}</h6>
                <p><strong>{{ ticket.title }}</strong></p>
                <span class="badge"
                  [ngClass]="{
                    'bg-success': ticket.status === 'open',
                    'bg-warning text-dark': ticket.status === 'in_review',
                    'bg-danger': ticket.status === 'closed'
                  }">
                  {{ ticket.status.replace('_', ' ') | titlecase }}
                </span>
                <p class="date">Created: {{ ticket.created_at | date:'mediumDate' }} {{ ticket.created_at | date:'shortTime' }}</p>
              </div>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>