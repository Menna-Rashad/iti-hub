<div class="post-wrapper" *ngIf="post">
  <mat-card class="post-card">
    <mat-card-header>
      <mat-card-title class="post-title">{{ post.title }}</mat-card-title>
      <mat-card-subtitle class="post-meta">
        <span>{{ post.user?.name }}</span> Â· 
        <span>{{ post.created_at | date:'medium' }}</span>
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <p class="post-content">{{ post.content }}</p>

      <!-- âœ… Ø¨Ø¯Ù„ Ø§Ù„Ø²Ø±Ø§Ø¦Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©ØŒ Ø§Ø³ØªØ®Ø¯Ù…Ù†Ø§ Ø§Ù„ÙƒÙ…Ø¨ÙˆÙ†Ù†Øª -->
      <app-vote-buttons
      [targetType]="'post'"
      [targetId]="post.id"
      [upvotes]="post.upvotes"
      [downvotes]="post.downvotes"
      [currentVote]="post.current_user_vote"
      (voteUpdated)="onVoteUpdated('post', post.id, $event)"
    ></app-vote-buttons>

      <button *ngIf="canEdit" (click)="goToEdit()" mat-stroked-button color="primary" class="edit-btn">
        âœï¸ Edit Post
      </button>
    </mat-card-content>
  </mat-card>

  <!-- Comments -->
  <div class="comments-container">
    <h3>ğŸ’¬ Comments ({{ post.comments?.length }})</h3>

    <div class="comment-form">
      <mat-form-field appearance="outline" class="full-width">
        <textarea matInput [(ngModel)]="newComment" placeholder="Write a comment..."></textarea>
      </mat-form-field>
      <button mat-raised-button color="primary" (click)="addComment()">Add Comment</button>
    </div>

    <mat-card *ngFor="let comment of post.comments" class="comment-card">
      <mat-card-content>
        <p>{{ comment.content }}</p>
        <div class="comment-meta">
          <small>{{ comment.user?.name }} Â· {{ comment.created_at | date:'short' }}</small>
        </div>
      </mat-card-content>

      <!-- âœ… Ø¨Ø±Ø¯Ùˆ Ø§Ø³ØªØ¨Ø¯Ù„Ù†Ø§ Ø§Ù„ØªØµÙˆÙŠØª Ø¨ØªØ§Ø¹ Ø§Ù„ÙƒÙˆÙ…Ù†Øª -->
      <app-vote-buttons
      [targetType]="'comment'"
      [targetId]="comment.id"
      [upvotes]="comment.upvotes"
      [downvotes]="comment.downvotes"
      [currentVote]="comment.current_user_vote"
      (voteUpdated)="onVoteUpdated('comment', comment.id, $event)"
    ></app-vote-buttons>
    </mat-card>
  </div>
</div>
