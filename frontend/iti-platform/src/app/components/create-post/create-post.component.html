<div class="create-post-container">
  <h2>Create New Post</h2>

  <form (ngSubmit)="submitPost()" class="post-form" enctype="multipart/form-data">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Title</mat-label>
      <input matInput [(ngModel)]="postData.title" name="title" required />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Category</mat-label>
      <mat-select [(ngModel)]="postData.category_id" name="category_id" required>
        <mat-option *ngFor="let category of categories" [value]="category.id">
          {{ category.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Content</mat-label>
      <textarea matInput [(ngModel)]="postData.content" name="content" rows="5" required></textarea>
    </mat-form-field>

    <!-- âœ… File Upload Input -->
    <div class="mb-3">
      <label for="media">Attach Media Files</label>
      <input type="file" id="media" (change)="onFileSelected($event)" multiple />
    </div>

    <!-- âœ… Preview Section -->
    <div class="media-preview" *ngIf="mediaFiles.length > 0">
      <h4>ğŸ“‚ Selected Files:</h4>
      <ul>
        <li *ngFor="let file of mediaFiles">{{ file.name }}</li>
      </ul>
    </div>

    <div class="actions">
      <button mat-raised-button color="primary" type="submit">Submit</button>
      <button mat-button routerLink="/forum">Cancel</button>
    </div>
  </form>

  <!-- âœ… Text Preview -->
  <div class="preview-box" *ngIf="postData.title || postData.content">
    <h3>ğŸ“ Preview</h3>
    <h4>{{ postData.title }}</h4>
    <p>{{ postData.content }}</p>
  </div>
</div>
