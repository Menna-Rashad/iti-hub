<div class="create-post-container">
  <h2>Create New Post</h2>

  <form (ngSubmit)="submitPost()" class="post-form">
    <!-- Title Input -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Title</mat-label>
      <input matInput [(ngModel)]="postData.title" name="title" required />
    </mat-form-field>

    <!-- Category Dropdown -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Category</mat-label>
      <mat-select [(ngModel)]="postData.category_id" name="category_id" required>
        <mat-option *ngFor="let category of categories" [value]="category.id">
          {{ category.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Tags</mat-label>
      <input matInput [(ngModel)]="postData.tags" name="tags" placeholder="e.g. Angular, Forms, UX" />
    </mat-form-field>
    
    <!-- Content Input -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Content</mat-label>
      <textarea matInput [(ngModel)]="postData.content" name="content" rows="5" required></textarea>
    </mat-form-field>

    <!-- Actions -->
    <div class="actions">
      <button mat-raised-button color="primary" type="submit">Submit</button>
      <button mat-button routerLink="/forum">Cancel</button>
    </div>
  </form>

<!-- ‚úÖ Preview -->
<div class="preview-box" *ngIf="postData.title || postData.content">
  <h3>üìù Preview</h3>
  <h4>{{ postData.title }}</h4>
  <p><strong>Category:</strong> {{ getCategoryName(postData.category_id) || 'Uncategorized' }}</p>
  <p>{{ postData.content }}</p>

  <p *ngIf="postData.tags">
    <strong>Tags:</strong>
    <span class="tag" *ngFor="let tag of postData.tags.split(',')">{{ tag.trim() }}</span>
  </p>
</div>

</div>
